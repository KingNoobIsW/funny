<!DOCTYPE html>
<html>
<head>
    <title>Popup Swarm</title>
    <style>
        body {
            background: #111;
            color: white;
            font-family: Arial, Helvetica, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            text-align: center;
        }

        button {
            padding: 20px 40px;
            font-size: 24px;
            border: none;
            border-radius: 15px;
            background: #ff4444;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background: #ff2222;
        }

        h1 {
            font-size: 40px;
            margin-bottom: 20px;
        }

        p {
            opacity: 0.7;
        }
    </style>
</head>
<body>

<h1>Popup Swarm</h1>
<p>Click start to unleash chaos.</p>

<button onclick="spawnPopups()">START</button>

<script>
let popupCount = 15;
let popups = [];

// Spawn 15 popup windows
function spawnPopups() {
    for (let i = 0; i < popupCount; i++) {
        let left = 100 + i * 20;
        let top = 100 + i * 20;

        let w = window.open(
            "popup.html",
            "_blank",
            `popup=yes,width=300,height=300,left=${left},top=${top},resizable=yes,scrollbars=no`
        );

        popups.push(w);
    }
}

// Close all on pressing "!"
document.addEventListener("keydown", (e) => {
    if (e.key === "!") {
        for (let p of popups) {
            try {
                p.postMessage("closeNow", "*");
            } catch {}
        }
        popups = [];
    }
});
</script>

</body>
</html>
